services:
# #frontend service
#   frontend:
#     image: 'anand7254/golden-pearl-frontend'
#     container_name: frontend
#     environment:
#       NEXT_PUBLIC_BACKEND_URL: 'http://localhost:8082'
#       REDIS_URL: 'redis://redis:6379'
#     ports:
#       - '3000:3000'
#     depends_on:
#       - backend
#       - redis
#     networks:
#       - spring-boot-mongo-net
# #backend service
  backend:
    image: 'anand7254/golden-pearl-backend'
    container_name: backend
    ports:
      - '8082:8082'
    environment:
      # Secrets should be loaded from a .env file, not hardcoded.
      SPRING_DATA_MONGODB_URI: ${SPRING_DATA_MONGODB_URI}
      SPRING_DATA_MONGODB_DATABASE: ${SPRING_DATA_MONGODB_DATABASE:-golden_pearl_db}
      REDIS_HOST: 'redis'
      REDIS_PORT: '6379'
      FRONTEND_URL: ${FRONTEND_URL:-http://localhost:3000}
    depends_on:
      - redis
    networks:
      - spring-boot-mongo-net
# Redis service for caching
  redis:
    image: 'redis:7.2'
    container_name: redis
    # restart: always
    ports:
      - '6379:6379'
    networks:
      - spring-boot-mongo-net

networks:
  spring-boot-mongo-net: